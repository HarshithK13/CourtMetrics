<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <!-- Signup Component for the Signup Page -->
    <script type="text/babel">
        const Signup = () => {
            const [username, setUsername] = React.useState('');
            const [password, setPassword] = React.useState('');
            const [mobile, setMobile] = React.useState('');
            const [name, setName] = React.useState('');
            const [address, setAddress] = React.useState('');
            const [message, setMessage] = React.useState('');

            const handleSignup = async (e) => {
                e.preventDefault();
                setMessage('');

                const response = await fetch('/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams({ username, password, mobile, name, address })
                });

                const data = await response.json();
                setMessage(response.ok ? "Signup successful!" : data.error || "Error signing up");
            };

            return (
                <div>
                    <h2>Signup</h2>
                    {message && <p>{message}</p>}
                    <form onSubmit={handleSignup}>
                        <input type="text" placeholder="Username" value={username} onChange={e => setUsername(e.target.value)} required /> <br />
                        <input type="password" placeholder="Password" value={password} onChange={e => setPassword(e.target.value)} required /><br />
                        <input type="mobile" placeholder="Mobile" value={mobile} onChange={e => setMobile(e.target.value)} required /> <br />
                        <input type="name" placeholder="Name" value={name} onChange={e => setName(e.target.value)} required /> <br />
                        <input type="address" placeholder="Address" value={address} onChange={e => setAddress(e.target.value)} required /> <br />
                        <button type="submit">Signup</button>
                    </form>
                </div>
            );
        };

        ReactDOM.render(<Signup />, document.getElementById('root'));
    </script>
</body>
</html>