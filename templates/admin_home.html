{% extends "base.html" %}

{% block title %}Admin Home{% endblock %}

{% block content %}
<div class="admin-home-container">
    <h2>Admin Dashboard</h2>
    <h3>User Management</h3>
    <table class="user-table">
        <tr>
            <th>Username</th>
            <th>Name</th>
            <th>Mobile</th>
            <th>Address</th>
            <th>Actions</th>
        </tr>
        {% for user in users %}
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.Name }}</td>
            <td>{{ user.Mobile }}</td>
            <td>{{ user.Address }}</td>
            <td>
                <button onclick="editUser('{{ user._id }}')">Edit</button>
                <button onclick="deleteUser('{{ user._id }}')">Delete</button>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

<script>
    function editUser(userId) {
        // Code to open a form or modal for editing user details
        alert("Editing user: " + userId);
    }

    function deleteUser(userId) {
        // Code to delete a user with confirmation
        if (confirm("Are you sure you want to delete this user?")) {
            fetch(`/delete_user/${userId}`, { method: "DELETE" })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert("User deleted successfully!");
                        location.reload();
                    }
                });
        }
    }
</script>
{% endblock %}